# Vertex AI Infrastructure Configuration
# This file contains only infrastructure settings (no training/inference params)
# Used by both training and inference jobs

# ============================================================================
# VERTEX AI SETTINGS
# ============================================================================
vertex:
  # Project settings
  project_id: "wmt-81b2d4df3ac412f206f24f3ddc"
  region: "us-central1"
  
  # Service account and networking
  # service_account: "p13n-explore-sa@wmt-81b2d4df3ac412f206f24f3ddc.iam.gserviceaccount.com"
  service_account: "1048186071185-compute@developer.gserviceaccount.com"
  network: "projects/12856960411/global/networks/vpcnet-private-svc-access-usc1"
  
  # Storage
  staging_bucket: "gs://p13n-storage2/user/y0c07th/exp/cnn_set_pb"
  
  # Container
  container_uri: "us-docker.pkg.dev/vertex-ai/training/pytorch-gpu.2-4.py310:latest"
  
  # Package settings
  package_name: "src"  # Package contains src/ directory
  package_version: "0.3.0"
  module_path: "runner"  # src/runner.py
  
  # Job settings (default to GPU training profile)
  job_name: "set-pb-train-test"
  run_type: "training"
  # For testing - use T4 GPU with more memory
  machine_type: "n1-highmem-96"    
  accelerator_type: "NVIDIA_TESLA_T4"
  accelerator_count: 4
  # For production - use A100
  # machine_type: "a2-highgpu-1g"
  # accelerator_type: "NVIDIA_TESLA_A100"
  # accelerator_count: 1
  replica_count: 1

# # ============================================================================
# # MACHINE PROFILES
# # ============================================================================
# profiles:
#   # Production training (GPU)
#   train_gpu:
#     machine_type: "a2-highgpu-1g"
#     accelerator_type: "NVIDIA_TESLA_A100"
#     accelerator_count: 1
#     replica_count: 1
#     job_name_prefix: "repurchase-train-gpu"
#     module_path: "train.runner"        # Will implement later
  
#   # Debug training (smaller GPU)
#   train_debug:
#     machine_type: "n1-standard-4"
#     accelerator_type: "NVIDIA_TESLA_T4"
#     accelerator_count: 1
#     replica_count: 1
#     job_name_prefix: "repurchase-train-debug"
#     module_path: "train.runner"
  
#   # Batch inference (CPU only)
#   inference_batch:
#     machine_type: "n1-standard-8"
#     accelerator_count: 0               # No GPU needed
#     replica_count: 1
#     job_name_prefix: "repurchase-inference"
#     module_path: "inference.runner"    # Will implement later
  
#   # Large-scale training (multi-GPU)
#   train_multi_gpu:
#     machine_type: "a2-highgpu-2g"
#     accelerator_type: "NVIDIA_TESLA_A100"
#     accelerator_count: 2
#     replica_count: 1
#     job_name_prefix: "repurchase-train-multi"
#     module_path: "train.runner"

# # ============================================================================
# # JOB SUBMISSION SETTINGS
# # ============================================================================
# job_settings:
#   # Timeout
#   timeout: "24h"                       # Maximum job duration
  
#   # Retry settings
#   max_retry_count: 0                   # Don't auto-retry (debug manually)
  
#   # Environment variables (common to all jobs)
#   env_vars:
#     PYTHONUNBUFFERED: "1"
#     CUDA_VISIBLE_DEVICES: "0"
